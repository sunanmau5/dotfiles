# prefix (C-Space - least conflicting)
set -g prefix C-Space
unbind C-b
bind C-Space send-prefix

# essentials
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on
set -g mouse on
set -g default-terminal "tmux-256color"
set -g history-limit 10000
set -g escape-time 0

# clipboard (sync with system clipboard via pbcopy)
set -g set-clipboard on
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"

# status bar (ayu mirage inspired)
set -g status-position bottom
set -g status-style "bg=#1f2430,fg=#5c6773"
set -g status-left "#[fg=#1f2430,bg=#ffcc66,bold] #S #[bg=#1f2430] "
set -g status-left-length 20
set -g status-right ""
set -g window-status-format "#[fg=#5c6773] #I:#W "
set -g window-status-current-format "#[fg=#73d0ff,bold] #I:#W "

# easy reload
bind r source-file ~/.tmux.conf \; display "Reloaded"

# splits (use current path)
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# new window (use current path)
bind c new-window -c "#{pane_current_path}"

# session management
bind s choose-tree -Zs
bind n command-prompt -p "new session:" "new-session -s '%%'"

# project switcher
bind p display-popup -E "tmux-sessionizer"

# quick actions (no prefix needed)
bind-key -n M-x detach-client         # alt+x = detach
bind-key -n M-s choose-tree -Zs       # alt+s = session picker
bind-key -n M-l switch-client -l      # alt+l = toggle last session
bind-key -n M-[ switch-client -p      # alt+[ = previous session
bind-key -n M-] switch-client -n      # alt+] = next session
bind-key -n C-o send-keys 'nvim .' Enter  # ctrl+o = open nvim in current dir

# kill
bind q kill-pane
bind Q kill-session
