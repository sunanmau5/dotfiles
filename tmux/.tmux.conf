# prefix (C-Space - least conflicting)
set -g prefix C-Space
unbind-key C-b
bind-key C-Space send-prefix

# essentials
set-window-option -g mode-keys vi
set-window-option -g pane-base-index 1
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on
set -g mouse on
set -g default-terminal "tmux-256color"
set -g history-limit 10000
set -g escape-time 0
set -s focus-events on
set -s extended-keys on
set -g automatic-rename on
set -g automatic-rename-format '#{b:pane_current_path}'

# clipboard (sync with system clipboard via pbcopy)
set -g set-clipboard on
bind-key c copy-mode
bind-key -n M-q copy-mode
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"

# status bar (ayu mirage inspired, transparent base)
set -g status-position bottom
set -g status-style "bg=default,fg=#5c6773"
set -g status-left "#[fg=#1f2430,bg=#ffcc66,bold] #S #[bg=default] "
set -g status-left-length 20
set -g status-right ""
set -g window-status-format "#[fg=#5c6773] #I:#W "
set -g window-status-current-format "#[fg=#73d0ff,bold] #I:#W "
set -g pane-border-style "fg=#1f2430,bg=default"
set -g pane-active-border-style "fg=#5c6773,bg=default"

# reload
bind-key r source-file ~/.tmux.conf \; display "Reloaded"

# session mgmt
bind-key s choose-tree -Zs
bind-key n command-prompt -p "new session:" "new-session -s '%%'"

# window and pane mgmt
bind-key l split-window -h -c "#{pane_current_path}"
bind-key j split-window -v -c "#{pane_current_path}"
bind-key t new-window -c "#{pane_current_path}"
bind-key ] next-window
bind-key [ previous-window
bind-key f resize-pane -Z

# project switcher
bind-key p display-popup -E "tmux-sessionizer"

# quick actions (no prefix needed)
bind-key -n M-x detach-client         # alt+x = detach
bind-key -n M-s choose-tree -Zs       # alt+s = session picker
bind-key -n M-l switch-client -l      # alt+l = toggle last session
bind-key -n M-[ switch-client -p      # alt+[ = previous session
bind-key -n M-] switch-client -n      # alt+] = next session

bind-key q kill-pane
bind-key Q kill-window
